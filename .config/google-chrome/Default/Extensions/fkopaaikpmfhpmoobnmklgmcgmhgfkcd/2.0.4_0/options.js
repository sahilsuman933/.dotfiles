var tcDefaults={speed:1,speedStep:.1,rewindTime:10,advanceTime:10,fastSpeed:1.8,resetKeyCode:82,slowerKeyCode:83,fasterKeyCode:68,fastKeyCode:71,rewindKeyCode:90,advanceKeyCode:88,displayKeyCode:86,rememberSpeed:!1,startHidden:!1,blacklist:"\n    www.instagram.com\n    twitter.com\n    vine.co\n    imgur.com\n  ".replace(/^\s+|\s+$/gm,"")},keyCodeAliases={32:"Space",96:"Num 0",97:"Num 1",98:"Num 2",99:"Num 3",100:"Num 4",101:"Num 5",102:"Num 6",103:"Num 7",104:"Num 8",105:"Num 9",106:"Num *",107:"Num +",109:"Num -",110:"Num .",111:"Num /",186:";",188:"<",189:"-",187:"+",190:">",191:"/",192:"~",219:"[",220:"\\",221:"]",222:"'"};function recordKeyPress(e){e.keyCode>=48&&e.keyCode<=57||e.keyCode>=65&&e.keyCode<=90||keyCodeAliases[e.keyCode]?(e.target.value=keyCodeAliases[e.keyCode]||String.fromCharCode(e.keyCode),e.target.keyCode=e.keyCode,e.preventDefault(),e.stopPropagation()):8===e.keyCode&&(e.target.value="")}function inputFilterNumbersOnly(e){var t=String.fromCharCode(e.keyCode);/[\d\.]$/.test(t)&&/^\d+(\.\d*)?$/.test(e.target.value+t)||(e.preventDefault(),e.stopPropagation())}function inputFocus(e){e.target.value=""}function inputBlur(e){e.target.value=keyCodeAliases[e.target.keyCode]||String.fromCharCode(e.target.keyCode)}function updateShortcutInputText(e,t){document.getElementById(e).value=keyCodeAliases[t]||String.fromCharCode(t),document.getElementById(e).keyCode=t}function save_options(){var e=document.getElementById("speedStep").value,t=document.getElementById("rewindTime").value,n=document.getElementById("advanceTime").value,d=document.getElementById("fastSpeed").value,u=document.getElementById("resetKeyInput").keyCode,o=document.getElementById("rewindKeyInput").keyCode,a=document.getElementById("advanceKeyInput").keyCode,s=document.getElementById("slowerKeyInput").keyCode,r=document.getElementById("fasterKeyInput").keyCode,i=document.getElementById("fastKeyInput").keyCode,m=document.getElementById("displayKeyInput").keyCode,y=document.getElementById("rememberSpeed").checked,c=document.getElementById("startHidden").checked,l=document.getElementById("blacklist").value;e=isNaN(e)?tcDefaults.speedStep:Number(e),t=isNaN(t)?tcDefaults.rewindTime:Number(t),n=isNaN(n)?tcDefaults.advanceTime:Number(n),d=isNaN(d)?tcDefaults.fastSpeed:Number(d),u=isNaN(u)?tcDefaults.resetKeyCode:u,o=isNaN(o)?tcDefaults.rewindKeyCode:o,a=isNaN(a)?tcDefaults.advanceKeyCode:a,s=isNaN(s)?tcDefaults.slowerKeyCode:s,r=isNaN(r)?tcDefaults.fasterKeyCode:r,i=isNaN(i)?tcDefaults.fastKeyCode:i,m=isNaN(m)?tcDefaults.displayKeyCode:m,chrome.storage.sync.set({speedStep:e,rewindTime:t,advanceTime:n,fastSpeed:d,resetKeyCode:u,rewindKeyCode:o,advanceKeyCode:a,slowerKeyCode:s,fasterKeyCode:r,fastKeyCode:i,displayKeyCode:m,rememberSpeed:y,startHidden:c,blacklist:l.replace(/^\s+|\s+$/gm,"")},(function(){var e=document.getElementById("status");e.textContent="Options saved",setTimeout((function(){e.textContent=""}),1e3)}))}function restore_options(){chrome.storage.sync.get(tcDefaults,(function(e){document.getElementById("speedStep").value=e.speedStep.toFixed(2),document.getElementById("rewindTime").value=e.rewindTime,document.getElementById("advanceTime").value=e.advanceTime,document.getElementById("fastSpeed").value=e.fastSpeed,updateShortcutInputText("resetKeyInput",e.resetKeyCode),updateShortcutInputText("rewindKeyInput",e.rewindKeyCode),updateShortcutInputText("advanceKeyInput",e.advanceKeyCode),updateShortcutInputText("slowerKeyInput",e.slowerKeyCode),updateShortcutInputText("fasterKeyInput",e.fasterKeyCode),updateShortcutInputText("fastKeyInput",e.fastKeyCode),updateShortcutInputText("displayKeyInput",e.displayKeyCode),document.getElementById("rememberSpeed").checked=e.rememberSpeed,document.getElementById("startHidden").checked=e.startHidden,document.getElementById("blacklist").value=e.blacklist}))}function restore_defaults(){chrome.storage.sync.set(tcDefaults,(function(){restore_options();var e=document.getElementById("status");e.textContent="Default options restored",setTimeout((function(){e.textContent=""}),1e3)}))}function initShortcutInput(e){document.getElementById(e).addEventListener("focus",inputFocus),document.getElementById(e).addEventListener("blur",inputBlur),document.getElementById(e).addEventListener("keydown",recordKeyPress)}document.addEventListener("DOMContentLoaded",(function(){restore_options(),document.getElementById("save").addEventListener("click",save_options),document.getElementById("restore").addEventListener("click",restore_defaults),initShortcutInput("resetKeyInput"),initShortcutInput("rewindKeyInput"),initShortcutInput("advanceKeyInput"),initShortcutInput("slowerKeyInput"),initShortcutInput("fasterKeyInput"),initShortcutInput("fastKeyInput"),initShortcutInput("displayKeyInput"),document.getElementById("rewindTime").addEventListener("keypress",inputFilterNumbersOnly),document.getElementById("advanceTime").addEventListener("keypress",inputFilterNumbersOnly),document.getElementById("speedStep").addEventListener("keypress",inputFilterNumbersOnly),document.getElementById("fastSpeed").addEventListener("keypress",inputFilterNumbersOnly)}));